(this["webpackJsonpreact-use-downloader-example"]=this["webpackJsonpreact-use-downloader-example"]||[]).push([[0],{29:function(e,t,n){e.exports=n(41)},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),l=n(56),u=n(62),i=n(58),s=n(59),d=n(63),m=n(60),b=n(61),f=n(19),p=n.n(f),D=n(21),E=n(13),v=function(e){var t=e.setSize,n=e.setControllerCallback,a=e.setPercentageCallback,r=e.setErrorCallback;return function(e){if(!e.ok)throw Error("".concat(e.status," ").concat(e.type," ").concat(e.statusText));if(!e.body)throw Error("ReadableStream not yet supported in this browser.");var o=e.headers.get("content-encoding"),c=e.headers.get(o?"x-file-size":"content-length"),l=parseInt(c||0,10);t((function(){return l}));var u=0,i=new ReadableStream({start:function(t){n(t);var o=e.body.getReader();return function e(){return o.read().then((function(n){var r=n.done,o=n.value;return r?t.close():(u+=o.byteLength,t.enqueue(o),a({loaded:u,total:l}),e())})).catch((function(e){return r(e),o.cancel("Cancelled"),t.error(e)}))}()}});return new Response(i)}};function w(e,t,n,a){var r=new Blob(void 0!==a?[a,e]:[e],{type:n||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,t);else{var o=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),c=document.createElement("a");c.style.display="none",c.href=o,c.setAttribute("download",t),void 0===c.download&&c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(o)}),200)}}var g=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/react-use-downloader",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DEBUG_MODE,t=Object(a.useState)(0),n=Object(E.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(0),l=Object(E.a)(c,2),u=l[0],i=l[1],s=Object(a.useState)(0),d=Object(E.a)(s,2),m=d[0],b=d[1],f=Object(a.useState)(null),g=Object(E.a)(f,2),h=g[0],O=g[1],C=Object(a.useState)(!1),B=Object(E.a)(C,2),j=B[0],y=B[1],S=Object(a.useRef)(null),k=Object(a.useCallback)((function(e){var t=e.loaded,n=e.total,a=Math.round(t/n*100);i((function(){return a}))}),[]),R=Object(a.useCallback)((function(e){var t={"Failed to execute 'enqueue' on 'ReadableStreamDefaultController': Cannot enqueue a chunk into an errored readable stream":"Download canceled"};O((function(){return{errorMessage:t[e.message]?t[e.message]:e.message}}))}),[]),_=Object(a.useCallback)((function(e){S.current=e}),[]),x=Object(a.useCallback)((function(){S.current&&S.current.error()}),[]),L=Object(a.useCallback)((function(){_(null),o((function(){return 0})),i((function(){return 0})),b((function(){return 0})),y((function(){return!1}))}),[_]),U=Object(a.useCallback)((function(t,n){j||Object(D.a)(p.a.mark((function a(){var r,c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:L(),O((function(){return null})),y((function(){return!0})),r=setInterval((function(){return o((function(e){return e+1}))}),e?1:1e3),c=v({setSize:b,setControllerCallback:_,setPercentageCallback:k,setErrorCallback:R}),fetch(t,{method:"GET"}).then(c).then((function(e){return e.blob()})).then((function(e){return w(e,n)})).then((function(){return L(),clearInterval(r)})).catch((function(e){return L(),O((function(t){return"Failed to fetch"!==e.message?{errorMessage:e.message}:t})),clearInterval(r)}));case 3:case"end":return a.stop()}}),a)})))()}),[j,L,e,_,k,R]);return Object(a.useMemo)((function(){return{elapsed:r,percentage:u,size:m,download:U,cancel:x,error:h,isInProgress:j}}),[r,u,m,U,x,h,j])},h=Object(l.a)({root:{maxWidth:390,margin:"4rem auto"},list:{padding:"0 1.5rem"}});function O(){var e=h(),t=g(),n=t.size,a=t.elapsed,o=t.percentage,c=t.download,l=t.cancel,f=t.error,p=t.isInProgress;return r.a.createElement(u.a,{className:e.root,elevation:2},r.a.createElement(i.a,null,r.a.createElement(s.a,{gutterBottom:!0,variant:"h5",component:"h1"},"react-use-downloader"),r.a.createElement(s.a,{variant:"body2",color:"textSecondary",component:"h2",paragraph:!0},"Creates a download handler function and gives progress information"),r.a.createElement(d.a,{variant:"determinate",value:o})),r.a.createElement(i.a,null,r.a.createElement("ul",{className:e.list},r.a.createElement("li",null,r.a.createElement(s.a,{variant:"body2",color:"textSecondary",component:"p"},"size: ",r.a.createElement("b",null,n," bytes"))),r.a.createElement("li",null,r.a.createElement(s.a,{variant:"body2",color:"textSecondary",component:"p"},"elapsed: ",r.a.createElement("b",null,a,"s"))),r.a.createElement("li",null,r.a.createElement(s.a,{variant:"body2",color:"textSecondary",component:"p"},"percentage: ",r.a.createElement("b",null,o,"%"))),r.a.createElement("li",null,r.a.createElement(s.a,{variant:"body2",color:"textSecondary",component:"p"},"error: ",r.a.createElement("b",null,JSON.stringify(f)))),r.a.createElement("li",null,r.a.createElement(s.a,{variant:"body2",color:"textSecondary",component:"p"},"isInProgress: ",r.a.createElement("b",null,p.toString()))))),r.a.createElement(m.a,null,r.a.createElement(b.a,{disabled:p,size:"small",color:"primary",onClick:function(){return c("https://upload.wikimedia.org/wikipedia/commons/4/4d/%D0%93%D0%BE%D0%B2%D0%B5%D1%80%D0%BB%D0%B0_%D1%96_%D0%9F%D0%B5%D1%82%D1%80%D0%BE%D1%81_%D0%B2_%D0%BF%D1%80%D0%BE%D0%BC%D1%96%D0%BD%D1%8F%D1%85_%D0%B2%D1%80%D0%B0%D0%BD%D1%96%D1%88%D0%BD%D1%8C%D0%BE%D0%B3%D0%BE_%D1%81%D0%BE%D0%BD%D1%86%D1%8F.jpg","beautiful-carpathia.jpg")}},"Download file"),r.a.createElement(b.a,{disabled:!p,size:"small",color:"primary",onClick:function(){return l()}},"Cancel the download")))}c.a.render(a.createElement(O,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.e4cfd6fa.chunk.js.map