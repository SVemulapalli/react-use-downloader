{"version":3,"sources":["../../dist/index.es.js","App.js","index.js"],"names":["o","e","setSize","t","setControllerCallback","n","setPercentageCallback","r","setErrorCallback","ok","Error","status","type","statusText","body","a","headers","get","l","s","parseInt","c","d","ReadableStream","start","getReader","read","then","done","value","close","byteLength","enqueue","loaded","total","catch","cancel","error","Response","Blob","window","navigator","msSaveBlob","URL","createObjectURL","webkitURL","document","createElement","style","display","href","setAttribute","download","appendChild","click","setTimeout","removeChild","revokeObjectURL","process","REACT_APP_DEBUG_MODE","i","u","b","w","h","m","g","p","R","Math","round","f","errorMessage","message","v","current","C","k","y","setInterval","fetch","method","blob","clearInterval","elapsed","percentage","size","isInProgress","useStyles","makeStyles","root","maxWidth","margin","list","padding","App","classes","useDownloader","Card","className","elevation","CardContent","Typography","gutterBottom","variant","component","color","paragraph","LinearProgress","JSON","stringify","toString","CardActions","Button","disabled","onClick","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e4cfd6fa.chunk.js","sourcesContent":["import{useState as e,useRef as t,useCallback as n,useMemo as r}from\"react\";const o=({setSize:e,setControllerCallback:t,setPercentageCallback:n,setErrorCallback:r})=>o=>{if(!o.ok)throw Error(`${o.status} ${o.type} ${o.statusText}`);if(!o.body)throw Error(\"ReadableStream not yet supported in this browser.\");const a=o.headers.get(\"content-encoding\"),l=o.headers.get(a?\"x-file-size\":\"content-length\"),s=parseInt(l||0,10);e((()=>s));let c=0;const d=new ReadableStream({start(e){t(e);const a=o.body.getReader();return function t(){return a.read().then((({done:r,value:o})=>r?e.close():(c+=o.byteLength,e.enqueue(o),n({loaded:c,total:s}),t()))).catch((t=>(r(t),a.cancel(\"Cancelled\"),e.error(t))))}()}});return new Response(d)};function a(e,t,n,r){const o=new Blob(void 0!==r?[r,e]:[e],{type:n||\"application/octet-stream\"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,t);else{const e=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),n=document.createElement(\"a\");n.style.display=\"none\",n.href=e,n.setAttribute(\"download\",t),void 0===n.download&&n.setAttribute(\"target\",\"_blank\"),document.body.appendChild(n),n.click(),setTimeout((()=>{document.body.removeChild(n),window.URL.revokeObjectURL(e)}),200)}}function l(){const l=process.env.REACT_APP_DEBUG_MODE,[s,c]=e(0),[d,i]=e(0),[u,b]=e(0),[w,h]=e(null),[m,g]=e(!1),p=t(null),R=n((({loaded:e,total:t})=>{const n=Math.round(e/t*100);i((()=>n))}),[]),f=n((e=>{const t={\"Failed to execute 'enqueue' on 'ReadableStreamDefaultController': Cannot enqueue a chunk into an errored readable stream\":\"Download canceled\"};h((()=>({errorMessage:t[e.message]?t[e.message]:e.message})))}),[]),v=n((e=>{p.current=e}),[]),C=n((()=>{p.current&&p.current.error()}),[]),k=n((()=>{v(null),c((()=>0)),i((()=>0)),b((()=>0)),g((()=>!1))}),[v]),y=n(((e,t)=>{m||async function(){k(),h((()=>null)),g((()=>!0));const n=setInterval((()=>c((e=>e+1))),l?1:1e3),r=o({setSize:b,setControllerCallback:v,setPercentageCallback:R,setErrorCallback:f});fetch(e,{method:\"GET\"}).then(r).then((e=>e.blob())).then((e=>a(e,t))).then((()=>(k(),clearInterval(n)))).catch((e=>(k(),h((t=>{const{message:n}=e;return\"Failed to fetch\"!==n?{errorMessage:e.message}:t})),clearInterval(n))))}()}),[m,k,l,v,R,f]);return r((()=>({elapsed:s,percentage:d,size:u,download:y,cancel:C,error:w,isInProgress:m})),[s,d,u,y,C,w,m])}export default l;export{a as jsDownload,o as resolver};\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  LinearProgress,\n  Typography,\n  makeStyles,\n} from '@material-ui/core';\nimport useDownloader from 'react-use-downloader';\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 390,\n    margin: '4rem auto',\n  },\n  list: {\n    padding: '0 1.5rem',\n  },\n});\n\nexport default function App() {\n  const classes = useStyles();\n  const {\n    size,\n    elapsed,\n    percentage,\n    download,\n    cancel,\n    error,\n    isInProgress,\n  } = useDownloader();\n\n  const fileUrl =\n    'https://upload.wikimedia.org/wikipedia/commons/4/4d/%D0%93%D0%BE%D0%B2%D0%B5%D1%80%D0%BB%D0%B0_%D1%96_%D0%9F%D0%B5%D1%82%D1%80%D0%BE%D1%81_%D0%B2_%D0%BF%D1%80%D0%BE%D0%BC%D1%96%D0%BD%D1%8F%D1%85_%D0%B2%D1%80%D0%B0%D0%BD%D1%96%D1%88%D0%BD%D1%8C%D0%BE%D0%B3%D0%BE_%D1%81%D0%BE%D0%BD%D1%86%D1%8F.jpg';\n  const filename = 'beautiful-carpathia.jpg';\n\n  return (\n    <Card className={classes.root} elevation={2}>\n      <CardContent>\n        <Typography gutterBottom variant=\"h5\" component=\"h1\">\n          react-use-downloader\n        </Typography>\n        <Typography\n          variant=\"body2\"\n          color=\"textSecondary\"\n          component=\"h2\"\n          paragraph\n        >\n          Creates a download handler function and gives progress information\n        </Typography>\n        <LinearProgress variant=\"determinate\" value={percentage} />\n      </CardContent>\n      <CardContent>\n        <ul className={classes.list}>\n          <li>\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n              size: <b>{size} bytes</b>\n            </Typography>\n          </li>\n          <li>\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n              elapsed: <b>{elapsed}s</b>\n            </Typography>\n          </li>\n          <li>\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n              percentage: <b>{percentage}%</b>\n            </Typography>\n          </li>\n          <li>\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n              error: <b>{JSON.stringify(error)}</b>\n            </Typography>\n          </li>\n          <li>\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n              isInProgress: <b>{isInProgress.toString()}</b>\n            </Typography>\n          </li>\n        </ul>\n      </CardContent>\n      <CardActions>\n        <Button\n          disabled={isInProgress}\n          size=\"small\"\n          color=\"primary\"\n          onClick={() => download(fileUrl, filename)}\n        >\n          Download file\n        </Button>\n        <Button\n          disabled={!isInProgress}\n          size=\"small\"\n          color=\"primary\"\n          onClick={() => cancel()}\n        >\n          Cancel the download\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n","import * as React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}